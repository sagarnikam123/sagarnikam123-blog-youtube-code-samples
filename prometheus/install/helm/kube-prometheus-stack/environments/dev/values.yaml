# Development Environment Values
# Minimal resources, short retention for cost savings
#
# Usage:
#   helm install prometheus prometheus-community/kube-prometheus-stack \
#     -n prometheus --create-namespace \
#     -f ../../base/values.yaml \
#     -f ../../versions/v3.9.0-latest/values.yaml \
#     -f values.yaml

# Common tolerations - use YAML anchor for reuse
_tolerations: &common_tolerations
  - key: app-support
    operator: Equal
    value: multi-platform-all
    effect: NoSchedule

prometheus:
  prometheusSpec:
    retention: 3d
    tolerations: *common_tolerations
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        cpu: 1
        memory: 2Gi
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: gp3
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi

alertmanager:
  alertmanagerSpec:
    retention: 24h
    tolerations: *common_tolerations
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 100m
        memory: 256Mi

grafana:
  adminPassword: prom-operator
  tolerations: *common_tolerations
  persistence:
    enabled: true
    storageClassName: gp3
    size: 5Gi
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

prometheusOperator:
  tolerations: *common_tolerations

kube-state-metrics:
  enabled: false
  tolerations: *common_tolerations

prometheus-node-exporter:
  tolerations: *common_tolerations

thanosRuler:
  thanosRulerSpec:
    tolerations: *common_tolerations

# Disable Kubernetes component scraping for dev
kubeEtcd:
  enabled: false
kubeControllerManager:
  enabled: false
kubeScheduler:
  enabled: false
kubeProxy:
  enabled: false
kubeApiServer:
  enabled: false
coreDns:
  enabled: false
kubelet:
  enabled: false
