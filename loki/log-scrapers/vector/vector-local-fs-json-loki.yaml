data_dir: $HOME/data/vector # set if no global data_dir set

sources:
  fuzzy_logs:
    type: file
    include:
      - $HOME/data/log/logger/*.log # change according to your file path
    read_from: beginning
    encoding:
      charset: utf-8

transforms:
  parse_logs:
    type: remap
    inputs:
      - fuzzy_logs
    source: |
      . = parse_json!(.message) # make sure your log line has "message" keyword

sinks:
  loki_sink:
    type: loki
    inputs:
      - parse_logs
    endpoint: http://127.0.0.1:3100 # change as per your Loki endpoint
    encoding:
      codec: json
    healthcheck:
      enabled: true
    labels:
      service_name: fuzzy-train
      source: fuzzy-train-log

api:  # optional
  enabled: true
  address: 127.0.0.1:8686 # visit - http://127.0.0.1:8686/playground
  playground: true
